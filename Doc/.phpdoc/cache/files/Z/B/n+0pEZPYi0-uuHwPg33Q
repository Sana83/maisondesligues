1683248420
waR3U4bTeM%3A5de8b9f62402ea88afb20f05e46c4726-8a3724a92e72fd75371fbd21f190d468
s:27020:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjhhMzcyNGE5MmU3MmZkNzUzNzFmYmQyMWYxOTBkNDY4IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTg6InNpbXBsZS1waHB1bml0LnBocCI7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBwYXRoIjtzOjUyOiJ2ZW5kb3Ivc3ltZm9ueS9waHB1bml0LWJyaWRnZS9iaW4vc2ltcGxlLXBocHVuaXQucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czoxNzk2NDoiPD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBTeW1mb255IHBhY2thZ2UuCiAqCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW5Ac3ltZm9ueS5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8vIFBsZWFzZSB1cGRhdGUgd2hlbiBwaHB1bml0IG5lZWRzIHRvIGJlIHJlaW5zdGFsbGVkIHdpdGggZnJlc2ggZGVwczoKLy8gQ2FjaGUtSWQ6IDIwMjEtMDItMDQgMTE6MDAgVVRDCgplcnJvcl9yZXBvcnRpbmcoLTEpOwoKZ2xvYmFsICRhcmd2LCAkYXJnYzsKJGFyZ3YgPSAkX1NFUlZFUlsnYXJndiddID8/IFtdOwokYXJnYyA9ICRfU0VSVkVSWydhcmdjJ10gPz8gMDsKJGdldEVudlZhciA9IGZ1bmN0aW9uICgkbmFtZSwgJGRlZmF1bHQgPSBmYWxzZSkgdXNlICgkYXJndikgewogICAgaWYgKGZhbHNlICE9PSAkdmFsdWUgPSBnZXRlbnYoJG5hbWUpKSB7CiAgICAgICAgcmV0dXJuICR2YWx1ZTsKICAgIH0KCiAgICBzdGF0aWMgJHBocHVuaXRDb25maWcgPSBudWxsOwogICAgaWYgKG51bGwgPT09ICRwaHB1bml0Q29uZmlnKSB7CiAgICAgICAgJHBocHVuaXRDb25maWdGaWxlbmFtZSA9IG51bGw7CiAgICAgICAgJGdldFBocFVuaXRDb25maWcgPSBmdW5jdGlvbiAoJHByb2JhYmxlQ29uZmlnKSB1c2UgKCYkZ2V0UGhwVW5pdENvbmZpZykgewogICAgICAgICAgICBpZiAoISRwcm9iYWJsZUNvbmZpZykgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzX2RpcigkcHJvYmFibGVDb25maWcpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJGdldFBocFVuaXRDb25maWcoJHByb2JhYmxlQ29uZmlnLlxESVJFQ1RPUllfU0VQQVJBVE9SLidwaHB1bml0LnhtbCcpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZmlsZV9leGlzdHMoJHByb2JhYmxlQ29uZmlnKSkgewogICAgICAgICAgICAgICAgcmV0dXJuICRwcm9iYWJsZUNvbmZpZzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZmlsZV9leGlzdHMoJHByb2JhYmxlQ29uZmlnLicuZGlzdCcpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJHByb2JhYmxlQ29uZmlnLicuZGlzdCc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH07CgogICAgICAgIGZvcmVhY2ggKCRhcmd2IGFzICRjbGlBcmd1bWVudEluZGV4ID0+ICRjbGlBcmd1bWVudCkgewogICAgICAgICAgICBpZiAoJy0tJyA9PT0gJGNsaUFyZ3VtZW50KSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBsb25nIG9wdGlvbgogICAgICAgICAgICBpZiAoJy0tY29uZmlndXJhdGlvbicgPT09ICRjbGlBcmd1bWVudCAmJiBhcnJheV9rZXlfZXhpc3RzKCRjbGlBcmd1bWVudEluZGV4ICsgMSwgJGFyZ3YpKSB7CiAgICAgICAgICAgICAgICAkcGhwdW5pdENvbmZpZ0ZpbGVuYW1lID0gJGdldFBocFVuaXRDb25maWcoJGFyZ3ZbJGNsaUFyZ3VtZW50SW5kZXggKyAxXSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBzaG9ydCBvcHRpb24KICAgICAgICAgICAgaWYgKDAgPT09IHN0cnBvcygkY2xpQXJndW1lbnQsICctYycpKSB7CiAgICAgICAgICAgICAgICBpZiAoJy1jJyA9PT0gJGNsaUFyZ3VtZW50ICYmIGFycmF5X2tleV9leGlzdHMoJGNsaUFyZ3VtZW50SW5kZXggKyAxLCAkYXJndikpIHsKICAgICAgICAgICAgICAgICAgICAkcGhwdW5pdENvbmZpZ0ZpbGVuYW1lID0gJGdldFBocFVuaXRDb25maWcoJGFyZ3ZbJGNsaUFyZ3VtZW50SW5kZXggKyAxXSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRwaHB1bml0Q29uZmlnRmlsZW5hbWUgPSAkZ2V0UGhwVW5pdENvbmZpZyhzdWJzdHIoJGNsaUFyZ3VtZW50LCAyKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJHBocHVuaXRDb25maWdGaWxlbmFtZSA9ICRwaHB1bml0Q29uZmlnRmlsZW5hbWUgPzogJGdldFBocFVuaXRDb25maWcoJ3BocHVuaXQueG1sJyk7CgogICAgICAgIGlmICgkcGhwdW5pdENvbmZpZ0ZpbGVuYW1lKSB7CiAgICAgICAgICAgICRwaHB1bml0Q29uZmlnID0gbmV3IERvbURvY3VtZW50KCk7CiAgICAgICAgICAgICRwaHB1bml0Q29uZmlnLT5sb2FkKCRwaHB1bml0Q29uZmlnRmlsZW5hbWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRwaHB1bml0Q29uZmlnID0gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgaWYgKGZhbHNlICE9PSAkcGhwdW5pdENvbmZpZykgewogICAgICAgICR2YXIgPSBuZXcgRE9NWHBhdGgoJHBocHVuaXRDb25maWcpOwogICAgICAgIGZvcmVhY2ggKCR2YXItPnF1ZXJ5KCcvL3BocC9zZXJ2ZXJbQG5hbWU9IicuJG5hbWUuJyJdJykgYXMgJHZhcikgewogICAgICAgICAgICByZXR1cm4gJHZhci0+Z2V0QXR0cmlidXRlKCd2YWx1ZScpOwogICAgICAgIH0KICAgICAgICBmb3JlYWNoICgkdmFyLT5xdWVyeSgnLy9waHAvZW52W0BuYW1lPSInLiRuYW1lLiciXScpIGFzICR2YXIpIHsKICAgICAgICAgICAgcmV0dXJuICR2YXItPmdldEF0dHJpYnV0ZSgndmFsdWUnKTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuICRkZWZhdWx0Owp9OwoKJHBhc3N0aHJ1T3JGYWlsID0gZnVuY3Rpb24gKCRjb21tYW5kKSB7CiAgICBwYXNzdGhydSgkY29tbWFuZCwgJHN0YXR1cyk7CgogICAgaWYgKCRzdGF0dXMpIHsKICAgICAgICBleGl0KCRzdGF0dXMpOwogICAgfQp9OwoKaWYgKFxQSFBfVkVSU0lPTl9JRCA+PSA4MDAwMCkgewogICAgLy8gUEhQIDggcmVxdWlyZXMgUEhQVW5pdCA5LjMrLCBQSFAgOC4xIHJlcXVpcmVzIFBIUFVuaXQgOS41KwogICAgJFBIUFVOSVRfVkVSU0lPTiA9ICRnZXRFbnZWYXIoJ1NZTUZPTllfUEhQVU5JVF9WRVJTSU9OJywgJzkuNScpID86ICc5LjUnOwp9IGVsc2VpZiAoXFBIUF9WRVJTSU9OX0lEID49IDcwMjAwKSB7CiAgICAvLyBQSFBVbml0IDggcmVxdWlyZXMgUEhQIDcuMisKICAgICRQSFBVTklUX1ZFUlNJT04gPSAkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfVkVSU0lPTicsICc4LjUnKSA/OiAnOC41JzsKfSBlbHNlIHsKICAgICRQSFBVTklUX1ZFUlNJT04gPSAkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfVkVSU0lPTicsICc3LjUnKSA/OiAnNy41JzsKfQoKJE1BWF9QSFBVTklUX1ZFUlNJT04gPSAkZ2V0RW52VmFyKCdTWU1GT05ZX01BWF9QSFBVTklUX1ZFUlNJT04nLCBmYWxzZSk7CgppZiAoJE1BWF9QSFBVTklUX1ZFUlNJT04gJiYgdmVyc2lvbl9jb21wYXJlKCRNQVhfUEhQVU5JVF9WRVJTSU9OLCAkUEhQVU5JVF9WRVJTSU9OLCAnPCcpKSB7CiAgICAkUEhQVU5JVF9WRVJTSU9OID0gJE1BWF9QSFBVTklUX1ZFUlNJT047Cn0KCiRQSFBVTklUX1JFTU9WRV9SRVRVUk5fVFlQRUhJTlQgPSBmaWx0ZXJfdmFyKCRnZXRFbnZWYXIoJ1NZTUZPTllfUEhQVU5JVF9SRU1PVkVfUkVUVVJOX1RZUEVISU5UJywgJzAnKSwgXEZJTFRFUl9WQUxJREFURV9CT09MRUFOKTsKCiRDT01QT1NFUl9KU09OID0gZ2V0ZW52KCdDT01QT1NFUicpID86ICdjb21wb3Nlci5qc29uJzsKCiRyb290ID0gX19ESVJfXzsKd2hpbGUgKCFmaWxlX2V4aXN0cygkcm9vdC4nLycuJENPTVBPU0VSX0pTT04pIHx8IGZpbGVfZXhpc3RzKCRyb290LicvRGVwcmVjYXRpb25FcnJvckhhbmRsZXIucGhwJykpIHsKICAgIGlmICgkcm9vdCA9PT0gZGlybmFtZSgkcm9vdCkpIHsKICAgICAgICBicmVhazsKICAgIH0KICAgICRyb290ID0gZGlybmFtZSgkcm9vdCk7Cn0KCiRvbGRQd2QgPSBnZXRjd2QoKTsKJFBIUFVOSVRfRElSID0gcnRyaW0oJGdldEVudlZhcignU1lNRk9OWV9QSFBVTklUX0RJUicsICRyb290LicvdmVuZG9yL2Jpbi8ucGhwdW5pdCcpLCAnLycuXERJUkVDVE9SWV9TRVBBUkFUT1IpOwokUEhQID0gZGVmaW5lZCgnUEhQX0JJTkFSWScpID8gXFBIUF9CSU5BUlkgOiAncGhwJzsKJFBIUCA9IGVzY2FwZXNoZWxsYXJnKCRQSFApOwppZiAoJ3BocGRiZycgPT09IFxQSFBfU0FQSSkgewogICAgJFBIUCAuPSAnIC1xcnInOwp9CgokZGVmYXVsdEVudnMgPSBbCiAgICAnQ09NUE9TRVInID0+ICdjb21wb3Nlci5qc29uJywKICAgICdDT01QT1NFUl9WRU5ET1JfRElSJyA9PiAndmVuZG9yJywKICAgICdDT01QT1NFUl9CSU5fRElSJyA9PiAnYmluJywKICAgICdTWU1GT05ZX1NJTVBMRV9QSFBVTklUX0JJTl9ESVInID0+IF9fRElSX18sCl07Cgpmb3JlYWNoICgkZGVmYXVsdEVudnMgYXMgJGVudk5hbWUgPT4gJGVudlZhbHVlKSB7CiAgICBpZiAoJGVudlZhbHVlICE9PSBnZXRlbnYoJGVudk5hbWUpKSB7CiAgICAgICAgcHV0ZW52KCIkZW52TmFtZT0kZW52VmFsdWUiKTsKICAgICAgICAkX1NFUlZFUlskZW52TmFtZV0gPSAkX0VOVlskZW52TmFtZV0gPSAkZW52VmFsdWU7CiAgICB9Cn0KCmlmICgnZGlzYWJsZWQnID09PSAkZ2V0RW52VmFyKCdTWU1GT05ZX0RFUFJFQ0FUSU9OU19IRUxQRVInKSkgewogICAgcHV0ZW52KCdTWU1GT05ZX0RFUFJFQ0FUSU9OU19IRUxQRVI9ZGlzYWJsZWQnKTsKfQoKJENPTVBPU0VSID0gKCRDT01QT1NFUiA9IGdldGVudignQ09NUE9TRVJfQklOQVJZJykpCiAgICB8fCBmaWxlX2V4aXN0cygkQ09NUE9TRVIgPSAkb2xkUHdkLicvY29tcG9zZXIucGhhcicpCiAgICB8fCAoJENPTVBPU0VSID0gcnRyaW0oKHN0cmluZykgKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SID8gcHJlZ19yZXBsYWNlKCcvW1xyXG5dLiovJywgJycsIGB3aGVyZS5leGUgY29tcG9zZXIucGhhciAyPiBOVUxgKSA6IGB3aGljaCBjb21wb3Nlci5waGFyIDI+IC9kZXYvbnVsbGApKSkKICAgIHx8ICgkQ09NUE9TRVIgPSBydHJpbSgoc3RyaW5nKSAoJ1xcJyA9PT0gXERJUkVDVE9SWV9TRVBBUkFUT1IgPyBwcmVnX3JlcGxhY2UoJy9bXHJcbl0uKi8nLCAnJywgYHdoZXJlLmV4ZSBjb21wb3NlciAyPiBOVUxgKSA6IGB3aGljaCBjb21wb3NlciAyPiAvZGV2L251bGxgKSkpCiAgICB8fCBmaWxlX2V4aXN0cygkQ09NUE9TRVIgPSBydHJpbSgoc3RyaW5nKSAoJ1xcJyA9PT0gXERJUkVDVE9SWV9TRVBBUkFUT1IgPyBgZ2l0IHJldi1wYXJzZSAtLXNob3ctdG9wbGV2ZWwgMj4gTlVMYCA6IGBnaXQgcmV2LXBhcnNlIC0tc2hvdy10b3BsZXZlbCAyPiAvZGV2L251bGxgKSkuXERJUkVDVE9SWV9TRVBBUkFUT1IuJ2NvbXBvc2VyLnBoYXInKQogICAgPyAoJyMhL3Vzci9iaW4vZW52IHBocCcgPT09IGZpbGVfZ2V0X2NvbnRlbnRzKCRDT01QT1NFUiwgZmFsc2UsIG51bGwsIDAsIDE4KSA/ICRQSFAgOiAnJykuJyAnLmVzY2FwZXNoZWxsYXJnKCRDT01QT1NFUikgLy8gZGV0ZWN0IHNoZWxsIHdyYXBwZXJzIGJ5IGxvb2tpbmcgYXQgdGhlIHNoZWJhbmcKICAgIDogJ2NvbXBvc2VyJzsKCiRwcmV2Q2FjaGVEaXIgPSBnZXRlbnYoJ0NPTVBPU0VSX0NBQ0hFX0RJUicpOwppZiAoJHByZXZDYWNoZURpcikgewogICAgaWYgKGZhbHNlID09PSAkYWJzb2x1dGVDYWNoZURpciA9IHJlYWxwYXRoKCRwcmV2Q2FjaGVEaXIpKSB7CiAgICAgICAgQG1rZGlyKCRwcmV2Q2FjaGVEaXIsIDA3NzcsIHRydWUpOwogICAgICAgICRhYnNvbHV0ZUNhY2hlRGlyID0gcmVhbHBhdGgoJHByZXZDYWNoZURpcik7CiAgICB9CiAgICBpZiAoJGFic29sdXRlQ2FjaGVEaXIpIHsKICAgICAgICBwdXRlbnYoIkNPTVBPU0VSX0NBQ0hFX0RJUj0kYWJzb2x1dGVDYWNoZURpciIpOwogICAgfSBlbHNlIHsKICAgICAgICAkcHJldkNhY2hlRGlyID0gZmFsc2U7CiAgICB9Cn0KJFNZTUZPTllfUEhQVU5JVF9SRU1PVkUgPSAkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfUkVNT1ZFJywgJ3BocHNwZWMvcHJvcGhlY3knLigkUEhQVU5JVF9WRVJTSU9OIDwgNi4wID8gJyBzeW1mb255L3lhbWwnIDogJycpKTsKJFNZTUZPTllfUEhQVU5JVF9SRVFVSVJFID0gJGdldEVudlZhcignU1lNRk9OWV9QSFBVTklUX1JFUVVJUkUnLCAnJyk7CiRjb25maWd1cmF0aW9uSGFzaCA9IG1kNShpbXBsb2RlKFxQSFBfRU9MLCBbbWQ1X2ZpbGUoX19GSUxFX18pLCAkU1lNRk9OWV9QSFBVTklUX1JFTU9WRSwgJFNZTUZPTllfUEhQVU5JVF9SRVFVSVJFLCAoaW50KSAkUEhQVU5JVF9SRU1PVkVfUkVUVVJOX1RZUEVISU5UXSkpOwokUEhQVU5JVF9WRVJTSU9OX0RJUiA9IHNwcmludGYoJ3BocHVuaXQtJXMtJWQnLCAkUEhQVU5JVF9WRVJTSU9OLCAkUEhQVU5JVF9SRU1PVkVfUkVUVVJOX1RZUEVISU5UKTsKaWYgKCFmaWxlX2V4aXN0cygiJFBIUFVOSVRfRElSLyRQSFBVTklUX1ZFUlNJT05fRElSL3BocHVuaXQiKSB8fCAkY29uZmlndXJhdGlvbkhhc2ggIT09IEBmaWxlX2dldF9jb250ZW50cygiJFBIUFVOSVRfRElSLy4kUEhQVU5JVF9WRVJTSU9OX0RJUi5tZDUiKSkgewogICAgLy8gQnVpbGQgYSBzdGFuZGFsb25lIHBocHVuaXQgd2l0aG91dCBzeW1mb255L3lhbWwgbm9yIHByb3BoZWN5IGJ5IGRlZmF1bHQKCiAgICBAbWtkaXIoJFBIUFVOSVRfRElSLCAwNzc3LCB0cnVlKTsKICAgIGNoZGlyKCRQSFBVTklUX0RJUik7CiAgICBpZiAoZmlsZV9leGlzdHMoIiRQSFBVTklUX1ZFUlNJT05fRElSIikpIHsKICAgICAgICBwYXNzdGhydShzcHJpbnRmKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SID8gJ3JtZGlyIC9TIC9RICVzIDI+IE5VTCcgOiAncm0gLXJmICVzJywgZXNjYXBlc2hlbGxhcmcoIiRQSFBVTklUX1ZFUlNJT05fRElSLm9sZCIpKSk7CiAgICAgICAgcmVuYW1lKCIkUEhQVU5JVF9WRVJTSU9OX0RJUiIsICIkUEhQVU5JVF9WRVJTSU9OX0RJUi5vbGQiKTsKICAgICAgICBwYXNzdGhydShzcHJpbnRmKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SID8gJ3JtZGlyIC9TIC9RICVzJyA6ICdybSAtcmYgJXMnLCBlc2NhcGVzaGVsbGFyZygiJFBIUFVOSVRfVkVSU0lPTl9ESVIub2xkIikpKTsKICAgIH0KCiAgICAkaW5mbyA9IFtdOwogICAgZm9yZWFjaCAoZXhwbG9kZSgiXG4iLCBgJENPTVBPU0VSIGluZm8gLS1uby1hbnNpIC1hIC1uIHBocHVuaXQvcGhwdW5pdCAiJFBIUFVOSVRfVkVSU0lPTi4qImApIGFzICRsaW5lKSB7CiAgICAgICAgJGxpbmUgPSBydHJpbSgkbGluZSk7CgogICAgICAgIGlmICghJGluZm8gJiYgcHJlZ19tYXRjaCgnL152ZXJzaW9ucyArOiAvJywgJGxpbmUpKSB7CiAgICAgICAgICAgICRpbmZvWyd2ZXJzaW9ucyddID0gZXhwbG9kZSgnLCAnLCBsdHJpbShzdWJzdHIoJGxpbmUsIDkpLCAnOiAnKSk7CiAgICAgICAgfSBlbHNlaWYgKGlzc2V0KCRpbmZvWydyZXF1aXJlcyddKSkgewogICAgICAgICAgICBpZiAoJycgPT09ICRsaW5lKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGxpbmUgPSBleHBsb2RlKCcgJywgJGxpbmUsIDIpOwogICAgICAgICAgICAkaW5mb1sncmVxdWlyZXMnXVskbGluZVswXV0gPSAkbGluZVsxXTsKICAgICAgICB9IGVsc2VpZiAoJGluZm8gJiYgJ3JlcXVpcmVzJyA9PT0gJGxpbmUpIHsKICAgICAgICAgICAgJGluZm9bJ3JlcXVpcmVzJ10gPSBbXTsKICAgICAgICB9CiAgICB9CgogICAgaWYgKGluX2FycmF5KCctLWNvbG9ycz1uZXZlcicsICRhcmd2LCB0cnVlKSB8fCAoaXNzZXQoJGFyZ3ZbJGkgPSBhcnJheV9zZWFyY2goJ25ldmVyJywgJGFyZ3YsIHRydWUpIC0gMV0pICYmICctLWNvbG9ycycgPT09ICRhcmd2WyRpXSkpIHsKICAgICAgICAkQ09NUE9TRVIgLj0gJyAtLW5vLWFuc2knOwogICAgfSBlbHNlIHsKICAgICAgICAkQ09NUE9TRVIgLj0gJyAtLWFuc2knOwogICAgfQoKICAgICRpbmZvICs9IFsKICAgICAgICAndmVyc2lvbnMnID0+IFtdLAogICAgICAgICdyZXF1aXJlcycgPT4gWydwaHAnID0+ICcqJ10sCiAgICBdOwoKICAgICRzdGFibGVWZXJzaW9ucyA9IGFycmF5X2ZpbHRlcigkaW5mb1sndmVyc2lvbnMnXSwgZnVuY3Rpb24gKCR2KSB7CiAgICAgICAgcmV0dXJuICFwcmVnX21hdGNoKCcvLWRldiR8XmRldi0vJywgJHYpOwogICAgfSk7CgogICAgaWYgKCEkc3RhYmxlVmVyc2lvbnMpIHsKICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiBjcmVhdGUtcHJvamVjdCAtLWlnbm9yZS1wbGF0Zm9ybS1yZXFzIC0tbm8taW5zdGFsbCAtLXByZWZlci1kaXN0IC0tbm8tc2NyaXB0cyAtLW5vLXBsdWdpbnMgLS1uby1wcm9ncmVzcyAtcyBkZXYgcGhwdW5pdC9waHB1bml0ICRQSFBVTklUX1ZFUlNJT05fRElSIFwiJFBIUFVOSVRfVkVSU0lPTi4qXCIiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgY3JlYXRlLXByb2plY3QgLS1pZ25vcmUtcGxhdGZvcm0tcmVxcyAtLW5vLWluc3RhbGwgLS1wcmVmZXItZGlzdCAtLW5vLXNjcmlwdHMgLS1uby1wbHVnaW5zIC0tbm8tcHJvZ3Jlc3MgcGhwdW5pdC9waHB1bml0ICRQSFBVTklUX1ZFUlNJT05fRElSIFwiJFBIUFVOSVRfVkVSU0lPTi4qXCIiKTsKICAgIH0KCiAgICBAY29weSgiJFBIUFVOSVRfVkVSU0lPTl9ESVIvcGhwdW5pdC54c2QiLCAncGhwdW5pdC54c2QnKTsKICAgIGNoZGlyKCIkUEhQVU5JVF9WRVJTSU9OX0RJUiIpOwogICAgaWYgKCRTWU1GT05ZX1BIUFVOSVRfUkVNT1ZFKSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgcmVtb3ZlIC0tbm8tdXBkYXRlIC0tbm8taW50ZXJhY3Rpb24gIi4kU1lNRk9OWV9QSFBVTklUX1JFTU9WRSk7CiAgICB9CiAgICBpZiAoJFNZTUZPTllfUEhQVU5JVF9SRVFVSVJFKSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgcmVxdWlyZSAtLW5vLXVwZGF0ZSAtLW5vLWludGVyYWN0aW9uICIuJFNZTUZPTllfUEhQVU5JVF9SRVFVSVJFKTsKICAgIH0KICAgIGlmICg1LjEgPD0gJFBIUFVOSVRfVkVSU0lPTiAmJiAkUEhQVU5JVF9WRVJTSU9OIDwgNS40KSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgcmVxdWlyZSAtLW5vLXVwZGF0ZSBwaHB1bml0L3BocHVuaXQtbW9jay1vYmplY3RzIFwifjMuMS4wXCIiKTsKICAgIH0KCiAgICBpZiAocHJlZ19tYXRjaCgne1xeKChcZCsrXC4pXGQrKylbXGRcLl0qJH0nLCAkaW5mb1sncmVxdWlyZXMnXVsncGhwJ10sICRwaHBWZXJzaW9uKSAmJiB2ZXJzaW9uX2NvbXBhcmUoJHBocFZlcnNpb25bMl0uJzk5JywgXFBIUF9WRVJTSU9OLCAnPCcpKSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgY29uZmlnIHBsYXRmb3JtLnBocCBcIiRwaHBWZXJzaW9uWzFdLjk5XCIiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgY29uZmlnIC0tdW5zZXQgcGxhdGZvcm0ucGhwIik7CiAgICB9CiAgICBpZiAoZmlsZV9leGlzdHMoJHBhdGggPSAkcm9vdC4nL3ZlbmRvci9zeW1mb255L3BocHVuaXQtYnJpZGdlJykpIHsKICAgICAgICAkaGF5c3RhY2sgPSAiJFBIUFVOSVRfRElSLyRQSFBVTklUX1ZFUlNJT05fRElSIjsKICAgICAgICAkcm9vdExlbiA9IHN0cmxlbigkcm9vdCk7CgogICAgICAgICRwID0gKCRyb290TGVuIDw9IHN0cmxlbigkaGF5c3RhY2spID8gc3RyX3JlcGVhdCgnLi4vJywgc3Vic3RyX2NvdW50KCRoYXlzdGFjaywgJy8nLCAkcm9vdExlbikpIDogJycpLid2ZW5kb3Ivc3ltZm9ueS9waHB1bml0LWJyaWRnZSc7CiAgICAgICAgaWYgKHJlYWxwYXRoKCRwKSA9PT0gcmVhbHBhdGgoJHBhdGgpKSB7CiAgICAgICAgICAgICRwYXRoID0gJHA7CiAgICAgICAgfQogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIHJlcXVpcmUgLS1uby11cGRhdGUgc3ltZm9ueS9waHB1bml0LWJyaWRnZSBcIipAZGV2XCIiKTsKICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiBjb25maWcgcmVwb3NpdG9yaWVzLnBocHVuaXQtYnJpZGdlIHBhdGggIi5lc2NhcGVzaGVsbGFyZyhzdHJfcmVwbGFjZSgnLycsIFxESVJFQ1RPUllfU0VQQVJBVE9SLCAkcGF0aCkpKTsKICAgICAgICBpZiAoJ1xcJyA9PT0gXERJUkVDVE9SWV9TRVBBUkFUT1IpIHsKICAgICAgICAgICAgZmlsZV9wdXRfY29udGVudHMoJ2NvbXBvc2VyLmpzb24nLCBwcmVnX3JlcGxhY2UoJy9eKCB7OH0pInBocHVuaXQtYnJpZGdlIjogXHskL20nLCAiJDBcbiQxICAgICIuJyJvcHRpb25zIjogeyJzeW1saW5rIjogZmFsc2V9LCcsIGZpbGVfZ2V0X2NvbnRlbnRzKCdjb21wb3Nlci5qc29uJykpKTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIHJlcXVpcmUgLS1uby11cGRhdGUgc3ltZm9ueS9waHB1bml0LWJyaWRnZSBcIipcIiIpOwogICAgfQogICAgJHByZXZSb290ID0gZ2V0ZW52KCdDT01QT1NFUl9ST09UX1ZFUlNJT04nKTsKICAgIHB1dGVudigiQ09NUE9TRVJfUk9PVF9WRVJTSU9OPSRQSFBVTklUX1ZFUlNJT04uOTkiKTsKICAgICRxID0gJ1xcJyA9PT0gXERJUkVDVE9SWV9TRVBBUkFUT1IgJiYgXFBIUF9WRVJTSU9OX0lEIDwgODAwMDAgPyAnIicgOiAnJzsKICAgIC8vIC0tbm8tc3VnZ2VzdCBpcyBub3QgaW4gdGhlIGxpc3QgdG8ga2VlcCBjb21wYXQgd2l0aCBjb21wb3NlciAxLjAsIHdoaWNoIGlzIHNoaXBwZWQgd2l0aCBVYnVudHUgMTYuMDRMVFMKICAgICRleGl0ID0gcHJvY19jbG9zZShwcm9jX29wZW4oIiRxJENPTVBPU0VSIGluc3RhbGwgLS1uby1kZXYgLS1wcmVmZXItZGlzdCAtLW5vLXByb2dyZXNzICRxIiwgW10sICRwLCBnZXRjd2QoKSkpOwogICAgcHV0ZW52KCdDT01QT1NFUl9ST09UX1ZFUlNJT04nLihmYWxzZSAhPT0gJHByZXZSb290ID8gJz0nLiRwcmV2Um9vdCA6ICcnKSk7CiAgICBpZiAoJHByZXZDYWNoZURpcikgewogICAgICAgIHB1dGVudigiQ09NUE9TRVJfQ0FDSEVfRElSPSRwcmV2Q2FjaGVEaXIiKTsKICAgIH0KICAgIGlmICgkZXhpdCkgewogICAgICAgIGV4aXQoJGV4aXQpOwogICAgfQoKICAgIC8vIE11dGF0ZSBUZXN0Q2FzZSBjb2RlCiAgICAkYWx0ZXJlZENvZGUgPSBmaWxlX2dldF9jb250ZW50cygkYWx0ZXJlZEZpbGUgPSAnLi9zcmMvRnJhbWV3b3JrL1Rlc3RDYXNlLnBocCcpOwogICAgaWYgKCRQSFBVTklUX1JFTU9WRV9SRVRVUk5fVFlQRUhJTlQpIHsKICAgICAgICAkYWx0ZXJlZENvZGUgPSBwcmVnX3JlcGxhY2UoJy9eICAgICgoPzpwcm90ZWN0ZWR8cHVibGljKSg/OiBzdGF0aWMpPyBmdW5jdGlvbiBcdytcKFwpKTogdm9pZC9tJywgJyAgICAkMScsICRhbHRlcmVkQ29kZSk7CiAgICB9CiAgICAkYWx0ZXJlZENvZGUgPSBwcmVnX3JlcGxhY2UoJy9hYnN0cmFjdCBjbGFzcyBUZXN0Q2FzZVteXHtdK1x7LycsICckMCAnLlxQSFBfRU9MLiIgICAgdXNlIFxTeW1mb255XEJyaWRnZVxQaHBVbml0XExlZ2FjeVxQb2x5ZmlsbFRlc3RDYXNlVHJhaXQ7IiwgJGFsdGVyZWRDb2RlLCAxKTsKICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRhbHRlcmVkRmlsZSwgJGFsdGVyZWRDb2RlKTsKCiAgICAvLyBNdXRhdGUgQXNzZXJ0IGNvZGUKICAgICRhbHRlcmVkQ29kZSA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRhbHRlcmVkRmlsZSA9ICcuL3NyYy9GcmFtZXdvcmsvQXNzZXJ0LnBocCcpOwogICAgJGFsdGVyZWRDb2RlID0gcHJlZ19yZXBsYWNlKCcvYWJzdHJhY3QgY2xhc3MgQXNzZXJ0W15ce10rXHsvJywgJyQwICcuXFBIUF9FT0wuIiAgICB1c2UgXFN5bWZvbnlcQnJpZGdlXFBocFVuaXRcTGVnYWN5XFBvbHlmaWxsQXNzZXJ0VHJhaXQ7IiwgJGFsdGVyZWRDb2RlLCAxKTsKICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRhbHRlcmVkRmlsZSwgJGFsdGVyZWRDb2RlKTsKCiAgICBmaWxlX3B1dF9jb250ZW50cygncGhwdW5pdCcsIDw8PCdFT1BIUCcKPD9waHAKCmRlZmluZSgnUEhQVU5JVF9DT01QT1NFUl9JTlNUQUxMJywgX19ESVJfXy4nL3ZlbmRvci9hdXRvbG9hZC5waHAnKTsKcmVxdWlyZSBQSFBVTklUX0NPTVBPU0VSX0lOU1RBTEw7CgppZiAoIWNsYXNzX2V4aXN0cyhcU3ltZm9ueUV4Y2x1ZGVMaXN0UGhwdW5pdDo6Y2xhc3MsIGZhbHNlKSkgewogICAgY2xhc3MgU3ltZm9ueUV4Y2x1ZGVMaXN0UGhwdW5pdCB7fQp9CmlmIChtZXRob2RfZXhpc3RzKFxQSFBVbml0XFV0aWxcRXhjbHVkZUxpc3Q6OmNsYXNzLCAnYWRkRGlyZWN0b3J5JykpIHsKICAgIChuZXcgUEhQVW5pdFxVdGlsXEV4Y2x1ZGVsaXN0KCkpLT5nZXRFeGNsdWRlZERpcmVjdG9yaWVzKCk7CiAgICBQSFBVbml0XFV0aWxcRXhjbHVkZUxpc3Q6OmFkZERpcmVjdG9yeShcZGlybmFtZSgobmV3IFxSZWZsZWN0aW9uQ2xhc3MoXFN5bWZvbnlFeGNsdWRlTGlzdFBocHVuaXQ6OmNsYXNzKSktPmdldEZpbGVOYW1lKCkpKTsKICAgIGNsYXNzX2V4aXN0cyhcU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdDo6Y2xhc3MsIGZhbHNlKSAmJiBQSFBVbml0XFV0aWxcRXhjbHVkZUxpc3Q6OmFkZERpcmVjdG9yeShcZGlybmFtZSgobmV3IFxSZWZsZWN0aW9uQ2xhc3MoXFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQ6OmNsYXNzKSktPmdldEZpbGVOYW1lKCkpKTsKfSBlbHNlaWYgKG1ldGhvZF9leGlzdHMoXFBIUFVuaXRcVXRpbFxCbGFja2xpc3Q6OmNsYXNzLCAnYWRkRGlyZWN0b3J5JykpIHsKICAgIChuZXcgUEhQVW5pdFxVdGlsXEJsYWNrTGlzdCgpKS0+Z2V0QmxhY2tsaXN0ZWREaXJlY3RvcmllcygpOwogICAgUEhQVW5pdFxVdGlsXEJsYWNrbGlzdDo6YWRkRGlyZWN0b3J5KFxkaXJuYW1lKChuZXcgXFJlZmxlY3Rpb25DbGFzcyhcU3ltZm9ueUV4Y2x1ZGVMaXN0UGhwdW5pdDo6Y2xhc3MpKS0+Z2V0RmlsZU5hbWUoKSkpOwogICAgY2xhc3NfZXhpc3RzKFxTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0OjpjbGFzcywgZmFsc2UpICYmIFBIUFVuaXRcVXRpbFxCbGFja2xpc3Q6OmFkZERpcmVjdG9yeShcZGlybmFtZSgobmV3IFxSZWZsZWN0aW9uQ2xhc3MoXFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQ6OmNsYXNzKSktPmdldEZpbGVOYW1lKCkpKTsKfSBlbHNlIHsKICAgIFBIUFVuaXRcVXRpbFxCbGFja2xpc3Q6OiRibGFja2xpc3RlZENsYXNzTmFtZXNbJ1N5bWZvbnlFeGNsdWRlTGlzdFBocHVuaXQnXSA9IDE7CiAgICBQSFBVbml0XFV0aWxcQmxhY2tsaXN0OjokYmxhY2tsaXN0ZWRDbGFzc05hbWVzWydTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0J10gPSAxOwp9CgpTeW1mb255XEJyaWRnZVxQaHBVbml0XFRleHRVSVxDb21tYW5kOjptYWluKCk7CgpFT1BIUAogICAgKTsKICAgIGNoZGlyKCcuLicpOwogICAgZmlsZV9wdXRfY29udGVudHMoIi4kUEhQVU5JVF9WRVJTSU9OX0RJUi5tZDUiLCAkY29uZmlndXJhdGlvbkhhc2gpOwogICAgY2hkaXIoJG9sZFB3ZCk7Cn0KCi8vIENyZWF0ZSBhIHN5bWxpbmsgd2l0aCBhIHByZWRpY3RhYmxlIHBhdGggcG9pbnRpbmcgdG8gdGhlIGN1cnJlbnRseSB1c2VkIHZlcnNpb24uCi8vIFRoaXMgaXMgdXNlZnVsIGZvciBzdGF0aWMgYW5hbHl0aWNzIHRvb2xzIHN1Y2ggYXMgUEhQU3RhbiBoYXZpbmcgdG8gbG9hZCBQSFBVbml0J3MgY2xhc3NlcwovLyBhbmQgZm9yIG90aGVyIHRlc3RpbmcgbGlicmFyaWVzIHN1Y2ggYXMgQmVoYXQgdXNpbmcgUEhQVW5pdCdzIGFzc2VydGlvbnMuCmNoZGlyKCRQSFBVTklUX0RJUik7CmlmICgnXFwnID09PSBcRElSRUNUT1JZX1NFUEFSQVRPUikgewogICAgcGFzc3RocnUoJ3JtZGlyIC9TIC9RIHBocHVuaXQgMj4gTlVMJyk7CiAgICBwYXNzdGhydShzcHJpbnRmKCdta2xpbmsgL2ogcGhwdW5pdCAlcyA+IE5VTCAyPiYxJywgZXNjYXBlc2hlbGxhcmcoJFBIUFVOSVRfVkVSU0lPTl9ESVIpKSk7Cn0gZWxzZSB7CiAgICBpZiAoZmlsZV9leGlzdHMoJ3BocHVuaXQnKSkgewogICAgICAgIEB1bmxpbmsoJ3BocHVuaXQnKTsKICAgIH0KICAgIEBzeW1saW5rKCRQSFBVTklUX1ZFUlNJT05fRElSLCAncGhwdW5pdCcpOwp9CmNoZGlyKCRvbGRQd2QpOwoKaWYgKCRQSFBVTklUX1ZFUlNJT04gPCA4LjApIHsKICAgICRhcmd2ID0gYXJyYXlfZmlsdGVyKCRhcmd2LCBmdW5jdGlvbiAoJHYpIHVzZSAoJiRhcmdjKSB7CiAgICAgICAgaWYgKCctLWRvLW5vdC1jYWNoZS1yZXN1bHQnICE9PSAkdikgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLS0kYXJnYzsKCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7Cn0gZWxzZWlmIChmaWx0ZXJfdmFyKGdldGVudignU1lNRk9OWV9QSFBVTklUX0RJU0FCTEVfUkVTVUxUX0NBQ0hFJyksIFxGSUxURVJfVkFMSURBVEVfQk9PTEVBTikpIHsKICAgICRhcmd2W10gPSAnLS1kby1ub3QtY2FjaGUtcmVzdWx0JzsKICAgICsrJGFyZ2M7Cn0KCiRjb21wb25lbnRzID0gW107CiRjbWQgPSBhcnJheV9tYXAoJ2VzY2FwZXNoZWxsYXJnJywgJGFyZ3YpOwokZXhpdCA9IDA7CgppZiAoaXNzZXQoJGFyZ3ZbMV0pICYmICdzeW1mb255JyA9PT0gJGFyZ3ZbMV0gJiYgIWZpbGVfZXhpc3RzKCdzeW1mb255JykgJiYgZmlsZV9leGlzdHMoJ3NyYy9TeW1mb255JykpIHsKICAgICRhcmd2WzFdID0gJ3NyYy9TeW1mb255JzsKfQppZiAoaXNzZXQoJGFyZ3ZbMV0pICYmIGlzX2RpcigkYXJndlsxXSkgJiYgIWZpbGVfZXhpc3RzKCRhcmd2WzFdLicvcGhwdW5pdC54bWwuZGlzdCcpKSB7CiAgICAvLyBGaW5kIFN5bWZvbnkgY29tcG9uZW50cyBpbiBwbGFpbiBwaHAgZm9yIFdpbmRvd3MgcG9ydGFiaWxpdHkKCiAgICAkZmluZGVyID0gbmV3IFJlY3Vyc2l2ZURpcmVjdG9yeUl0ZXJhdG9yKCRhcmd2WzFdLCBGaWxlc3lzdGVtSXRlcmF0b3I6OktFWV9BU19GSUxFTkFNRSB8IEZpbGVzeXN0ZW1JdGVyYXRvcjo6VU5JWF9QQVRIUyk7CiAgICAkZmluZGVyID0gbmV3IFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3IoJGZpbmRlcik7CiAgICAkZmluZGVyLT5zZXRNYXhEZXB0aChnZXRlbnYoJ1NZTUZPTllfUEhQVU5JVF9NQVhfREVQVEgnKSA/OiAzKTsKCiAgICBmb3JlYWNoICgkZmluZGVyIGFzICRmaWxlID0+ICRmaWxlSW5mbykgewogICAgICAgIGlmICgncGhwdW5pdC54bWwuZGlzdCcgPT09ICRmaWxlKSB7CiAgICAgICAgICAgICRjb21wb25lbnRzW10gPSBkaXJuYW1lKCRmaWxlSW5mby0+Z2V0UGF0aG5hbWUoKSk7CiAgICAgICAgfQogICAgfQogICAgaWYgKCRjb21wb25lbnRzKSB7CiAgICAgICAgYXJyYXlfc2hpZnQoJGNtZCk7CiAgICB9Cn0KCiRjbWRbMF0gPSBzcHJpbnRmKCclcyAlcyAtLWNvbG9ycz1hbHdheXMnLCAkUEhQLCBlc2NhcGVzaGVsbGFyZygiJFBIUFVOSVRfRElSLyRQSFBVTklUX1ZFUlNJT05fRElSL3BocHVuaXQiKSk7CiRjbWQgPSBzdHJfcmVwbGFjZSgnJScsICclJScsIGltcGxvZGUoJyAnLCAkY21kKSkuJyAlMSRzJzsKCmlmICgnXFwnID09PSBcRElSRUNUT1JZX1NFUEFSQVRPUikgewogICAgJGNtZCA9ICdjbWQgL3Y6b24gL2QgL2MgIignLiRjbWQuJyklMiRzIic7Cn0gZWxzZSB7CiAgICAkY21kIC49ICclMiRzJzsKfQoKaWYgKCRjb21wb25lbnRzKSB7CiAgICAkc2tpcHBlZFRlc3RzID0gJF9TRVJWRVJbJ1NZTUZPTllfUEhQVU5JVF9TS0lQUEVEX1RFU1RTJ10gPz8gZmFsc2U7CiAgICAkcnVubmluZ1Byb2NzID0gW107CgogICAgZm9yZWFjaCAoJGNvbXBvbmVudHMgYXMgJGNvbXBvbmVudCkgewogICAgICAgIC8vIFJ1biBwaHB1bml0IHRlc3RzIGluIHBhcmFsbGVsCgogICAgICAgIGlmICgkc2tpcHBlZFRlc3RzKSB7CiAgICAgICAgICAgIHB1dGVudigiU1lNRk9OWV9QSFBVTklUX1NLSVBQRURfVEVTVFM9JGNvbXBvbmVudC8kc2tpcHBlZFRlc3RzIik7CiAgICAgICAgfQoKICAgICAgICAkYyA9IGVzY2FwZXNoZWxsYXJnKCRjb21wb25lbnQpOwoKICAgICAgICBpZiAoJHByb2MgPSBwcm9jX29wZW4oc3ByaW50ZigkY21kLCAkYywgIiA+ICRjL3BocHVuaXQuc3Rkb3V0IDI+ICRjL3BocHVuaXQuc3RkZXJyIiksIFtdLCAkcGlwZXMpKSB7CiAgICAgICAgICAgICRydW5uaW5nUHJvY3NbJGNvbXBvbmVudF0gPSAkcHJvYzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkZXhpdCA9IDE7CiAgICAgICAgICAgIGVjaG8gIlwwMzNbNDFtS09cMDMzWzBtICRjb21wb25lbnRcblxuIjsKICAgICAgICB9CiAgICB9CgogICAgd2hpbGUgKCRydW5uaW5nUHJvY3MpIHsKICAgICAgICB1c2xlZXAoMzAwMDAwKTsKICAgICAgICAkdGVybWluYXRlZFByb2NzID0gW107CiAgICAgICAgZm9yZWFjaCAoJHJ1bm5pbmdQcm9jcyBhcyAkY29tcG9uZW50ID0+ICRwcm9jKSB7CiAgICAgICAgICAgICRwcm9jU3RhdHVzID0gcHJvY19nZXRfc3RhdHVzKCRwcm9jKTsKICAgICAgICAgICAgaWYgKCEkcHJvY1N0YXR1c1sncnVubmluZyddKSB7CiAgICAgICAgICAgICAgICAkdGVybWluYXRlZFByb2NzWyRjb21wb25lbnRdID0gJHByb2NTdGF0dXNbJ2V4aXRjb2RlJ107CiAgICAgICAgICAgICAgICB1bnNldCgkcnVubmluZ1Byb2NzWyRjb21wb25lbnRdKTsKICAgICAgICAgICAgICAgIHByb2NfY2xvc2UoJHByb2MpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3JlYWNoICgkdGVybWluYXRlZFByb2NzIGFzICRjb21wb25lbnQgPT4gJHByb2NTdGF0dXMpIHsKICAgICAgICAgICAgZm9yZWFjaCAoWydvdXQnLCAnZXJyJ10gYXMgJGZpbGUpIHsKICAgICAgICAgICAgICAgICRmaWxlID0gIiRjb21wb25lbnQvcGhwdW5pdC5zdGQkZmlsZSI7CiAgICAgICAgICAgICAgICByZWFkZmlsZSgkZmlsZSk7CiAgICAgICAgICAgICAgICB1bmxpbmsoJGZpbGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBGYWlsIG9uIGFueSBpbmRpdmlkdWFsIGNvbXBvbmVudCBmYWlsdXJlcyBidXQgaWdub3JlIHNvbWUgZXJyb3IgY29kZXMgb24gV2luZG93cyB3aGVuIEFQQ3UgaXMgZW5hYmxlZDoKICAgICAgICAgICAgLy8gU1RBVFVTX1NUQUNLX0JVRkZFUl9PVkVSUlVOICgtMTA3Mzc0MDc5MS8weEMwMDAwNDA5KQogICAgICAgICAgICAvLyBTVEFUVVNfQUNDRVNTX1ZJT0xBVElPTiAoLTEwNzM3NDE4MTkvMHhDMDAwMDAwNSkKICAgICAgICAgICAgLy8gU1RBVFVTX0hFQVBfQ09SUlVQVElPTiAoLTEwNzM3NDA5NDAvMHhDMDAwMDM3NCkKICAgICAgICAgICAgaWYgKCRwcm9jU3RhdHVzICYmICgnXFwnICE9PSBcRElSRUNUT1JZX1NFUEFSQVRPUiB8fCAhZXh0ZW5zaW9uX2xvYWRlZCgnYXBjdScpIHx8ICFmaWx0ZXJfdmFyKGluaV9nZXQoJ2FwYy5lbmFibGVfY2xpJyksIFxGSUxURVJfVkFMSURBVEVfQk9PTEVBTikgfHwgIWluX2FycmF5KCRwcm9jU3RhdHVzLCBbLTEwNzM3NDA3OTEsIC0xMDczNzQxODE5LCAtMTA3Mzc0MDk0MF0pKSkgewogICAgICAgICAgICAgICAgJGV4aXQgPSAkcHJvY1N0YXR1czsKICAgICAgICAgICAgICAgIGVjaG8gIlwwMzNbNDFtS09cMDMzWzBtICRjb21wb25lbnRcblxuIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVjaG8gIlwwMzNbMzJtT0tcMDMzWzBtICRjb21wb25lbnRcblxuIjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfSBlbHNlaWYgKCFpc3NldCgkYXJndlsxXSkgfHwgJ2luc3RhbGwnICE9PSAkYXJndlsxXSB8fCBmaWxlX2V4aXN0cygnaW5zdGFsbCcpKSB7CiAgICBpZiAoIWNsYXNzX2V4aXN0cyhcU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdDo6Y2xhc3MsIGZhbHNlKSkgewogICAgICAgIGNsYXNzIFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQKICAgICAgICB7CiAgICAgICAgfQogICAgfQogICAgYXJyYXlfc3BsaWNlKCRhcmd2LCAxLCAwLCBbJy0tY29sb3JzPWFsd2F5cyddKTsKICAgICRfU0VSVkVSWydhcmd2J10gPSAkYXJndjsKICAgICRfU0VSVkVSWydhcmdjJ10gPSArKyRhcmdjOwogICAgaW5jbHVkZSAiJFBIUFVOSVRfRElSLyRQSFBVTklUX1ZFUlNJT05fRElSL3BocHVuaXQiOwp9CgpleGl0KCRleGl0KTsKIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjE6e3M6MzI6IlxTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0IjtPOjM1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXyI6MTM6e3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjMyOiJcU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdCI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjMxOiJTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0Ijt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGRvY0Jsb2NrIjtOO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBhYnN0cmFjdCI7YjowO3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBmaW5hbCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBwYXJlbnQiO047czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGltcGxlbWVudHMiO2E6MDp7fXM6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBjb25zdGFudHMiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBwcm9wZXJ0aWVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AbWV0aG9kcyI7YTowOnt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHVzZWRUcmFpdHMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBsb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6NDMwO3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjA7fXM6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6NDMyO3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjA7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBtZXRhZGF0YSI7YTowOnt9fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";